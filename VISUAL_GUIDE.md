# ğŸ® VINCULAR BOT CON PÃGINA WEB - GUÃA VISUAL

## ğŸ“Š Vista General del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TU PÃGINA WEB                             â”‚
â”‚            https://project13-api.vercel.app                  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Dashboard                                           â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚ â”‚ ğŸ“¬ Mensajes                                 â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ Bienvenidas                              â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ Despedidas                               â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ Invite Tracker                           â”‚    â”‚   â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   â”‚
â”‚  â”‚ â”‚ ğŸ›¡ï¸  ModeraciÃ³n                             â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ AutoMod                                  â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ Logs                                     â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ Infracciones                             â”‚    â”‚   â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚   â”‚
â”‚  â”‚ â”‚ âš™ï¸  Sistema                                 â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ ConfiguraciÃ³n General                    â”‚    â”‚   â”‚
â”‚  â”‚ â”‚  â€¢ EstadÃ­sticas                             â”‚    â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•ï¸ (APIs)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SERVIDOR VERCEL (Backend)                    â”‚
â”‚                                                               â”‚
â”‚  /api/callback      â†’ Intercambia cÃ³digo OAuth             â”‚
â”‚  /api/guilds        â†’ Obtiene tus servidores               â”‚
â”‚  /api/guild-config  â†’ Obtiene configuraciÃ³n                â”‚
â”‚  /api/save-config   â†’ Guarda cambios                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TU BOT DE DISCORD (Local)                       â”‚
â”‚                                                               â”‚
â”‚  Lee la configuraciÃ³n y ejecuta:                            â”‚
â”‚  â€¢ EnvÃ­a bienvenidas                                        â”‚
â”‚  â€¢ EnvÃ­a despedidas                                         â”‚
â”‚  â€¢ Rastrea invitaciones                                     â”‚
â”‚  â€¢ Modera el servidor                                       â”‚
â”‚  â€¢ Toca mÃºsica                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ FLUJO DE USUARIO

### 1ï¸âƒ£ Usuario Hace Login
```
Usuario entra a https://project13-api.vercel.app
            â†“
Hace clic en "Iniciar SesiÃ³n"
            â†“
Se abre ventana de Discord
            â†“
Usuario autoriza la aplicaciÃ³n
            â†“
Discord envÃ­a cÃ³digo a /api/callback
```

### 2ï¸âƒ£ Backend Procesa Login
```
/api/callback recibe cÃ³digo
            â†“
Intercambia cÃ³digo por token de acceso
            â†“
Obtiene datos del usuario desde Discord
            â†“
Guarda token en cookies
            â†“
Redirige al dashboard
```

### 3ï¸âƒ£ Dashboard Carga
```
dashboard.js verifica el token
            â†“
Llama a /api/guilds
            â†“
Obtiene lista de servidores donde eres admin
            â†“
Muestra dropdown para seleccionar servidor
```

### 4ï¸âƒ£ Usuario Selecciona Servidor
```
Usuario abre dropdown y selecciona servidor
            â†“
dashboard.js llama a /api/guild-config
            â†“
Obtiene:
  â€¢ Canales del servidor
  â€¢ ConfiguraciÃ³n actual
            â†“
Rellena formularios con los datos
```

### 5ï¸âƒ£ Usuario Edita y Guarda
```
Usuario:
  â€¢ Activa bienvenidas
  â€¢ Selecciona canal
  â€¢ Escribe mensaje personalizado
  â€¢ Hace clic "Guardar"
            â†“
dashboard.js llama a /api/save-config
            â†“
Backend valida permisos
            â†“
Guarda la configuraciÃ³n
            â†“
Muestra confirmaciÃ³n
```

### 6ï¸âƒ£ Tu Bot ActÃºa
```
Tu bot.js lee la configuraciÃ³n
            â†“
Cuando alguien entra al servidor:
  â€¢ Lee config.welcome
  â€¢ Si estÃ¡ habilitada
  â€¢ EnvÃ­a el mensaje al canal configurado
  â€¢ Reemplaza {user} con el nombre real
```

---

## ğŸ“‹ CHECKLIST: Pasos para Implementar

### âœ… Paso 1: Crear Bot en Discord Developer Portal
- [ ] Ir a https://discord.com/developers/applications
- [ ] Crear "New Application"
- [ ] Ir a "Bot" â†’ "Add Bot"
- [ ] Ir a "OAuth2" â†’ "General"
- [ ] Copiar Client ID
- [ ] Copiar Client Secret (no compartir!)
- [ ] Ir a "General Information" â†’ Copiar Application ID
- [ ] Ir a "Bot" â†’ Copiar Token (no compartir!)
- [ ] Ir a "OAuth2" â†’ "URL Generator"
  - [ ] Scopes: `identify`, `guilds`
  - [ ] Permissions: (por ahora ninguno)
  - [ ] Copiar URL generada
- [ ] Abre la URL en navegador para invitar el bot a tu servidor

### âœ… Paso 2: Configurar Variables en Vercel
- [ ] Abre Vercel Dashboard
- [ ] Selecciona tu proyecto
- [ ] Settings â†’ Environment Variables
- [ ] AÃ±ade:
  ```
  CLIENT_ID = tu_client_id_aqui
  CLIENT_SECRET = tu_client_secret_aqui
  REDIRECT_URI = https://project13-api.vercel.app/api/callback
  FRONTEND_URI = https://project13-api.vercel.app
  BOT_TOKEN = tu_bot_token_aqui
  ```
- [ ] Guarda cambios (Vercel redeploy automÃ¡ticamente)

### âœ… Paso 3: Configurar Redirect URI en Discord
- [ ] Discord Developer Portal â†’ Tu aplicaciÃ³n
- [ ] OAuth2 â†’ Redirects
- [ ] AÃ±ade: `https://project13-api.vercel.app/api/callback`
- [ ] Guarda

### âœ… Paso 4: Crear tu Bot Local
- [ ] Crea una carpeta para tu bot: `mkdir mi-bot`
- [ ] Entra en la carpeta: `cd mi-bot`
- [ ] Inicializa npm: `npm init -y`
- [ ] Instala discord.js: `npm install discord.js dotenv`
- [ ] Copia `BOT_EXAMPLE.js` de tu proyecto
- [ ] Modifica segÃºn necesites
- [ ] Crea `.env`:
  ```
  DISCORD_TOKEN=tu_bot_token
  ```
- [ ] Ejecuta: `node index.js`

### âœ… Paso 5: Prueba Todo
- [ ] Vercel ha redeploy (3-5 min)
- [ ] Abre https://project13-api.vercel.app
- [ ] Haz login con Discord
- [ ] DeberÃ­as ver tus servidores en dropdown
- [ ] Selecciona uno
- [ ] Modifica un campo (ej: habilitar bienvenidas)
- [ ] Haz clic "Guardar"
- [ ] Revisa logs en Vercel para ver si se guardÃ³
- [ ] Tu bot local deberÃ­a usar esa configuraciÃ³n

---

## ğŸ” VARIABLES DE ENTORNO EXPLICADAS

### CLIENT_ID
- Identificador Ãºnico de tu aplicaciÃ³n en Discord
- 18-20 dÃ­gitos
- Visible pÃºblicamente, no es secreto
- Obtienes de Discord Developer Portal

### CLIENT_SECRET
- ContraseÃ±a de tu aplicaciÃ³n
- **NUNCA compartas esto pÃºblicamente**
- Obtienes de Discord Developer Portal
- Ãšsalo en Vercel Environment Variables

### BOT_TOKEN
- Token para que tu bot se conecte a Discord
- **NUNCA compartas esto pÃºblicamente**
- Obtienes de Discord Developer Portal â†’ Bot
- Lo usas solo en tu bot local (en .env)

### REDIRECT_URI
- URL a la que Discord envÃ­a el cÃ³digo despuÃ©s del login
- Debe ser: `https://project13-api.vercel.app/api/callback`
- Debe coincidir exactamente con lo que pones en Discord

### FRONTEND_URI
- URL base de tu pÃ¡gina web
- Debe ser: `https://project13-api.vercel.app`
- Sin barra final

---

## ğŸ“ ESTRUCTURA DE ARCHIVOS

```
proyecto/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ callback.js              â† OAuth2 exchange
â”‚   â”œâ”€â”€ verify.js                â† Verificar token
â”‚   â”œâ”€â”€ guilds.js                â† Obtener servidores
â”‚   â”œâ”€â”€ guild-config.js          â† Obtener configuraciÃ³n
â”‚   â””â”€â”€ save-config.js           â† Guardar configuraciÃ³n
â”‚
â”œâ”€â”€ dashboard.html               â† Interfaz web
â”œâ”€â”€ dashboard.js                 â† LÃ³gica de dashboard
â”œâ”€â”€ login.html                   â† PÃ¡gina de login
â”œâ”€â”€ styles.css                   â† Estilos globales
â”‚
â”œâ”€â”€ BOT_EXAMPLE.js               â† Ejemplo de bot (discord.js)
â”œâ”€â”€ BOT_INTEGRATION.md           â† DocumentaciÃ³n completa
â”œâ”€â”€ QUICK_START.md               â† GuÃ­a rÃ¡pida
â”œâ”€â”€ INTEGRATION_SUMMARY.md       â† Resumen
â””â”€â”€ vercel.json                  â† ConfiguraciÃ³n Vercel

tu-bot/ (CARPETA SEPARADA)
â”œâ”€â”€ index.js                     â† Tu bot
â”œâ”€â”€ .env                         â† DISCORD_TOKEN
â””â”€â”€ package.json
```

---

## ğŸ†˜ TROUBLESHOOTING

### âŒ "Guild not found"
**Causa:** El bot no estÃ¡ en el servidor o no tiene permisos
**SoluciÃ³n:**
1. Abre tu URL OAuth2 generada en Discord Dev Portal
2. Invita el bot a tu servidor
3. Dale permisos administrativos al bot
4. Reinicia el bot local

### âŒ "Not authorized"
**Causa:** Solo admins pueden editar
**SoluciÃ³n:**
1. Haz login con la cuenta administradora del servidor
2. O asigna permisos administrativos a tu usuario

### âŒ "Token invalid"
**Causa:** Token expirÃ³ (7 dÃ­as) o es incorrecto
**SoluciÃ³n:**
1. Haz logout y login nuevamente
2. O reinicia el bot con nuevo BOT_TOKEN

### âŒ La config no se guarda
**Causa:** `/api/save-config` no funcionando
**SoluciÃ³n:**
1. Revisa los logs en Vercel Console
2. Verifica que POST request se estÃ¡ enviando
3. AsegÃºrate de que tienes las variables de entorno

### âŒ El bot no funciona localmente
**Causa:** Varios posibles
**SoluciÃ³n:**
1. Verifica que DISCORD_TOKEN es correcto
2. Comprueba que el bot estÃ¡ online: `node index.js`
3. Revisa console por errores
4. AsegÃºrate que el bot estÃ¡ en el servidor

---

## ğŸš€ PRÃ“XIMOS PASOS

1. **Conectar Base de Datos**
   - Usa MongoDB para guardar configs en la nube
   - AsÃ­ mÃºltiples servidores funcionan mejor

2. **Agregar mÃ¡s Funcionalidades**
   - ModeraciÃ³n: kick, ban, mute
   - Entretenimiento: juegos
   - MÃºsica: play, pause, skip

3. **Mejorar Dashboard**
   - Editor visual de mensajes
   - Preview de cÃ³mo se verÃ¡
   - MÃ¡s opciones de personalizaciÃ³n

4. **Sistema de Tickets**
   - Crear tickets de soporte
   - Asignar moderadores

---

## ğŸ“ Â¿Necesitas Ayuda?

1. Lee `BOT_INTEGRATION.md` (documentaciÃ³n completa)
2. Revisa `BOT_EXAMPLE.js` para ver un ejemplo funcional
3. Comprueba los logs en Vercel Dashboard
4. Verifica que todas las variables de entorno estÃ¡n correctas

---

**Â¡Listo! Ahora tienes una integraciÃ³n completa entre tu pÃ¡gina web y tu bot de Discord!** ğŸ‰
